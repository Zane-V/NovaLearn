{% extends "base.html" %}
{% block content %}
<nav class="navbar" style="
position: fixed;
top: 0;
left: 0;
width: 100%;
background: dodgerblue;
color: white;
padding: 15px;
display: flex;
justify-content: space-between;
align-items: center;
z-index: 1000;
">
<h1 style="margin:0;"><a href="{{url_for('dashboard')}}" style="color:white; text-decoration:none;">NovaLearn</a></h1>
<ul style="list-style:none; margin:0; padding:0; display:flex; gap:20px;">
{% if session.get('user') %}
  {% if session['user']['role'] == 'Instructor' %}
    <li><a href="{{ url_for('create_course') }}" style="color:white; text-decoration:none;">Create Course</a></li>
    <li><a href="{{ url_for('upload_video') }}" style="color:white; text-decoration:none;">Upload Video</a></li>
    <li><a href="{{ url_for('upload_assignment') }}" style="color:white; text-decoration:none;">Upload Assignment</a></li>
  {% endif %}
  <li><a href="{{ url_for('my_courses') }}" style="color:white; text-decoration:none;">My Courses</a></li>
  <li><a href="{{ url_for('profile') }}" style="color:white; text-decoration:none;">Profile</a></li>
  <li><a href="{{ url_for('logout') }}" style="color:white; text-decoration:none;">Logout</a></li>
{% else %}
  <li><a href="{{ url_for('login') }}" style="color:white; text-decoration:none;">Login</a></li>
  <li><a href="{{ url_for('signup') }}" style="color:white; text-decoration:none;">Signup</a></li>
{% endif %}
</ul>
</nav>

<article class="course-detail" style="margin-top:80px; padding:20px;">
  <header>
    <h2>{{ course[1] }}</h2>
    <p><strong>Short Description:</strong> {{ course[2] }}</p>
  
    {% if course[4] %}
      <img src="{{ url_for('uploaded_file', filename=course[4]) }}" 
           alt="Course Image" width="300" style="border-radius:8px; margin:15px 0;">
    {% endif %}
  
    <section style="margin-top:20px;">
      <h3>Full Content</h3>
      <p>{{ course[5] }}</p>
    </section>
  
    <small><em>Instructor: {{ course[3] }}</em></small>
  </header>

  <section>
    <h3>Course Videos</h3>
    {% if videos %}
      <ul class="media-list">
        {% for v in videos %}
          <li class="media-item">
            <b>{{ v[2] }}</b><br>
            <video width="480" controls>
              <source src="{{ url_for('uploaded_file', filename=v[3]) }}" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No videos yet.</p>
    {% endif %}
  </section>

  <section>
    <h3>Assignments</h3>
    {% if assignments %}
      <ul class="media-list">
        {% for a in assignments %}
          <li class="media-item">
            <b>{{ a[2] }}</b> â€”
            <a class="btn" href="{{ url_for('uploaded_file', filename=a[3]) }}" target="_blank">Download</a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No assignments yet.</p>
    {% endif %}
  </section>
</article>

{% if not is_completed %}
  <form action="{{ url_for('mark_course_done', course_id=course['id']) }}" method="post">
    <button type="submit" style="padding:10px 20px; background:dodgerblue; color:white; border:none; border-radius:5px; cursor:pointer;">
      Mark as Done
    </button>
  </form>
{% else %}
  <p style="color: green; font-weight: bold; margin-top: 10px;">
     Course Completed!!  </p>
{% endif %}


{% endblock %}

